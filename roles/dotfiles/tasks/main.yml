---

# Dotfiles

- name: Cloning all dotfiles to the HOME directory
  become_user: "{{username}}"
  git: repo=https://github.com/palazzem/dotfiles.git dest="/home/{{username}}/.dotfiles" accept_hostkey=yes

- name: Removing old files (if any)
  file: state=absent name={{item}}
  with_items:
    - "/home/{{username}}/.zshrc"
    - "/home/{{username}}/.config/nvim/init.vim"
    - "/home/{{username}}/.config/awesome/rc.lua"
    - "/home/{{username}}/.config/awesome/utils.lua"
    - "/home/{{username}}/.config/awesome/widgets.lua"

- name: Creating required directories
  file: state=directory name={{item}}
  with_items:
    - "/home/{{username}}/.config/nvim/"
    - "/home/{{username}}/.config/awesome/"

- name: Creating symbolic links
  file: state=link src={{item.src}} dest={{item.dest}} owner={{username}} group={{username}}
  with_items:
      - { src: "/home/{{username}}/.dotfiles/zshrc", dest: "/home/{{username}}/.zshrc" }
      - { src: "/home/{{username}}/.dotfiles/config/nvim/nvimrc", dest: "/home/{{username}}/.config/nvim/init.vim" }
      - { src: "/home/{{username}}/.dotfiles/config/awesome/rc.lua", dest: "/home/{{username}}/.config/awesome/rc.lua" }
      - { src: "/home/{{username}}/.dotfiles/config/awesome/utils.lua", dest: "/home/{{username}}/.config/awesome/utils.lua" }
      - { src: "/home/{{username}}/.dotfiles/config/awesome/widgets.lua", dest: "/home/{{username}}/.config/awesome/widgets.lua" }
