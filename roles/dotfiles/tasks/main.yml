---

# Dotfiles

- name: Cloning all dotfiles to the HOME directory
  become_user: "{{username}}"
  git: repo=https://github.com/palazzem/dotfiles.git dest="/home/{{username}}/.dotfiles" accept_hostkey=yes

- name: Removing old files (if any)
  file: state=absent name={{item}}
  with_items:
    - "/home/{{username}}/.nvimrc"
    - "/home/{{username}}/.config/awesome/rc.lua"
    - "/home/{{username}}/.config/awesome/utils.lua"
    - "/home/{{username}}/.config/awesome/widgets.lua"

- name: Creating symbolic links
  file: state=link src={{item.src}} dest={{item.dest}} owner={{username}} group={{username}}
  with_items:
      - { src: "/home/{{username}}/.dotfiles/nvim/nvimrc", dest: "/home/{{username}}/.nvimrc" }
      - { src: "/home/{{username}}/.dotfiles/awesome/rc.lua", dest: "/home/{{username}}/.config/awesome/rc.lua" }
      - { src: "/home/{{username}}/.dotfiles/awesome/utils.lua", dest: "/home/{{username}}/.config/awesome/utils.lua" }
      - { src: "/home/{{username}}/.dotfiles/awesome/widgets.lua", dest: "/home/{{username}}/.config/awesome/widgets.lua" }
